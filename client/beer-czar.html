<head>
  <title>BEER CZAR</title>
</head>

<body>
  <div class='container'>
    <div class='row'>
      <div class='span4'>
        <h1>WELCOME TO BEER CZAR</h1>
      </div>
      <div class='span3 offset2'>
        {{> account}}
        {{> login}}
      </div>
    </div>
    <div class=''>
    {{> graph}}
    </div>
    <div class=''>
    {{#if currentUser}}
      {{> addBeer}}
      {{> beerList}}
    {{/if}}
    </div>
  </div>
</body>

<template name='graph'>
  {{#constant}}
    <svg class='js-graph'>
    </svg>
  {{/constant}}
</template>

<template name='login'>
  {{loginButtons}}
</template>

<template name='account'>
  {{#if currentUser}}
    {{> profile}}
  {{/if}}
</template>

<template name='profile'>
  <img class='profile-picture' src='{{currentUser.services.google.picture}}' />
  {{#if hasVotedForBeer currentUser}}
  <div>
    What you voted for:
    <ul>
      {{#each userPreferredBeer}}
        <li>{{this}}</li>
      {{/each}}
    </ul>
  </div>
  {{/if}}
</template>

<template name='addBeer'>
  <input class='js-newBeerName' type='text' name='beerName' value=''/>
  <button class='js-addBeer' type='button'>Add Beer</button>
</template>

<template name='beerList'>
  {{#each beers}}
    <p>{{name}}</p>
    <p>{{votes}}</p>
    {{#if currentUser}}
      {{#if canUpvote currentUser name}}
        <button class='js-addVote' type='button' data-id='{{_id}}'>+1</button>
      {{/if}}
      {{#if canDownvote currentUser name}}
        <button class='js-removeVote' type='button' data-id='{{_id}}'>-1</button>
      {{/if}}
    {{/if}}
    {{#if isAdmin currentUser}}
    <button class='js-removeBeer' type='button' data-id='{{_id}}'>Remove {{name}}</button>
    {{/if}}
  {{/each}}
</template>
